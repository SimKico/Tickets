<!DOCTYPE html>
<html>

<head>
	<title>Your profile</title>
	<link rel="icon" href="source/cloud-512.png" type="image/x-icon" />

	<!--JQuery 3.4.1 CDN CDN-->
	<script src="https://code.jquery.com/jquery-3.4.1.js"
		integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU=" crossorigin="anonymous"></script>

	<!--Bootsrap 4 CDN-->
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
		integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous" />

	<!--Fontawesome CDN-->
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css"
		integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous" />

	<!--Custom styles-->
	<link rel="stylesheet" type="text/css" href="css/login.css" />

	<script type="text/javascript">

		function loadProfile(){
			console.log("You are in");
			var username = localStorage.getItem("username");
			// console.log("loadProfile " + username);
			// var usernameData = JSON.stringify({username});
			
			$.ajax({
                    url:"/profile",
                    method:"get",
                    dataType: "JSON",
                    success:function(data){
						console.log(data);
						$("#username").val(data.username);
						
						$("#firstName").val(data.firstName);
						
						$("#lastName").val(data.lastName);

						$("#date_of_birth").val(data.birthDay.split(", 12")[0]);
						
						$("#gender").val(data.gender);

                    }
                })
		}

		function changeProfile(){
			location.href = "updateProfile.html";
		}

	</script>
</head>

<body  onload = "loadProfile()">
	<div class="container">
		<div class="d-flex justify-content-center h-100">
			<div class="card">
				<div class="card-header">
					<h3>Your profile</h3>
				</div>
				<div class="card-body">
					<div id="error" style="color: red"></div>
					<br />
					<form>
						<div class="input-group form-group">
							<div class="input-group-prepend">
								<span id="userIcon" class="input-group-text"><i class="fas fa-user"></i></span>
							</div>
							<input disabled id="username" class="form-control" type="text" placeholder="username" />
						</div>
						<div class="input-group form-group">
							<div class="input-group-prepend">
								<span class="input-group-text"><i class="fas fa-receipt"></i></span>
							</div>
							<input disabled id="firstName" class="form-control" type="text" placeholder="first name" />
						</div>
						<div class="input-group form-group">
							<div class="input-group-prepend">
								<span class="input-group-text"><i class="fas fa-receipt"></i></span>
							</div>
							<input disabled id="lastName" class="form-control" type="text" placeholder="last name" />
						</div>

						<div class="input-group form-group">
							<div class="input-group-prepend">
								<span class="input-group-text"><i class="fas fa-receipt"></i></span>
							</div>
							<div>
								<input disabled type="text" class="form-control" id="gender" />
							</div>
							<br />
						</div>

						<div class="input-group form-group">
							<div class="input-group-prepend" >
								<span class="input-group-text"><i class="fas fa-receipt"></i></span>
							</div>
							<p>
								<span class="input-group-text" id="birth">
									<a> Date of birth </a>
								</span>
								<input disabled type="text" class="form-control" id="date_of_birth" />
							</p>
						</div>

						<br />
						<div class="form-group">
							<input type="button" value="Change profile" class="btn left" onclick="changeProfile()" />
						</div>
					</form>
				</div>
			</div>
		</div>
	</div>
</body>

</html>